webpackJsonp([3,34,36,37],{201:function(t,e,a){a(566),a(567);var n=a(5)(a(237),a(634),"data-v-732b027f",null);t.exports=n.exports},237:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var l=a(6),s=n(l),o=a(7),r=n(o);e.default={data:function(){return{filter:{period:30,planType:"全部"},flyplans:[],times:[{label:"最近7天",value:7},{label:"最近两周",value:14},{label:"最近一个月",value:30},{label:"最近半年",value:183}]}},computed:{planTypes:function t(){var t=this.$store.state.planTypes,e=t.plan0.concat(t.plan1).concat(t.plan0);return e=e.filter(function(t){return"其他"!=t.label}),e.push({label:"全部"}),e},computedFlyplans:function t(){var t=this.flyplans.map(function(t){var e={date:t.beginTime.substring(0,10),hour:t.beginTime.substring(11,t.endTime.length)+"-"+t.endTime.substring(11,t.endTime.length)};return{number:t.number,type:t.type,airInfo:t.airInfo.length>0?t.airInfo[0].location:"",time:e,status:t.status}});return t}},mounted:function(){this.search()},methods:{addPlan:function(){var t=this.$store.getters.getSession;return 3!=t.authStatus?void this.$message.error("提示：您的帐号未通过认证，您暂时无法进行飞行报备和空域申请操作，请耐心等待"):void(window.location.href="#/createPlan")},fetchFlyplan:function(t,e,a){var n=r.default.GET_FLYPLANS+"?period="+e;"全部"!=t&&(n+="&type="+t),s.default.ajax({url:n,method:"get",dataType:"json",success:function(t){this.files=t.data.content,this.totalElements=t.data.totalElements,this.flyplans=t.data.map(function(t){return t.planes=JSON.parse(t.planes),t.airInfo=JSON.parse(t.airInfo),t.landingInfo=JSON.parse(t.landingInfo),t.contactInfo=JSON.parse(t.contactInfo),t})}.bind(this)})},search:function(){this.fetchFlyplan(this.filter.planType,this.filter.period)},start:function(t){var e=r.default.API_PATH+"console/flyplan/"+t+"/status/start";s.default.ajax({url:e,method:"put",dataType:"json",success:function(e){this.search(),this.$message("编号为"+t+"的飞行计划已开始")}.bind(this)})},finish:function(t){var e=r.default.API_PATH+"console/flyplan/"+t+"/status/stop";s.default.ajax({url:e,method:"put",dataType:"json",success:function(e){this.search(),this.$message("编号为"+t+"的飞行计划已结束")}.bind(this)})},deletePlan:function(t){this.$confirm("是否撤销编号"+t+"的飞行计划?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e=r.default.API_PATH+"console/flyplan/"+t;s.default.ajax({url:e,method:"delete",dataType:"json",success:function(t){this.search()}.bind(this)})}.bind(this))},createPlan:function(t){"0"==t.type?window.location.href="#tmpl/flyplan0/"+t.number:"1"==t.type?window.location.href="#tmpl/flyplan1/"+t.number:"2"==t.type&&(window.location.href="#tmpl/flyplan2/"+t.number)}}}},510:function(t,e,a){e=t.exports=a(2)(),e.push([t.id,".myplan_sel .el-input__icon+.el-input__inner{width:150px}","",{version:3,sources:["/./src/page/flyplan/myplan.vue"],names:[],mappings:"AACA,6CAA6C,WAAW,CACvD",file:"myplan.vue",sourcesContent:["\n.myplan_sel .el-input__icon+.el-input__inner{width:150px\n}"],sourceRoot:"webpack://"}])},511:function(t,e,a){e=t.exports=a(2)(),e.push([t.id,".action[data-v-732b027f]{font-size:18px;color:#0ba3ff;cursor:pointer}","",{version:3,sources:["/./src/page/flyplan/myplan.vue"],names:[],mappings:"AACA,yBAAyB,eAAe,cAAc,cAAc,CACnE",file:"myplan.vue",sourcesContent:["\n.action[data-v-732b027f]{font-size:18px;color:#0ba3ff;cursor:pointer\n}"],sourceRoot:"webpack://"}])},566:function(t,e,a){var n=a(510);"string"==typeof n&&(n=[[t.id,n,""]]);a(3)(n,{});n.locals&&(t.exports=n.locals)},567:function(t,e,a){var n=a(511);"string"==typeof n&&(n=[[t.id,n,""]]);a(3)(n,{});n.locals&&(t.exports=n.locals)},634:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"myplan_sel clear"},[a("div",{staticClass:"left"},[a("span",{staticStyle:{"margin-right":"10px"}},[t._v("时间:")]),t._v(" "),a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.search},model:{value:t.filter.period,callback:function(e){t.filter.period=e},expression:"filter.period"}},t._l(t.times,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("div",{staticClass:"left",staticStyle:{"margin-left":"20px"}},[a("span",{staticStyle:{"margin-right":"10px"}},[t._v("计划类型:")]),t._v(" "),a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.search},model:{value:t.filter.planType,callback:function(e){t.filter.planType=e},expression:"filter.planType"}},t._l(t.planTypes,function(t){return a("el-option",{key:t.label,attrs:{label:t.label,value:t.label}})}))],1),t._v(" "),a("div",{staticClass:"right"},[a("el-button",{attrs:{type:"primary",width:"70"},on:{click:t.addPlan}},[t._v("+ 新增")])],1)]),t._v(" "),a("el-table",{staticStyle:{width:"100%","margin-top":"15px"},attrs:{data:t.computedFlyplans}},[a("el-table-column",{attrs:{prop:"number",label:"计划号"},scopedSlots:t._u([{key:"default",fn:function(e){return["0"==e.row.type?a("a",{staticStyle:{"text-decoration":"underline",color:"#219"},attrs:{href:"#flyplan0/"+e.row.number}},[t._v(t._s(e.row.number))]):t._e(),t._v(" "),"1"==e.row.type?a("a",{staticStyle:{"text-decoration":"underline",color:"#219"},attrs:{href:"#flyplan1/"+e.row.number}},[t._v(t._s(e.row.number))]):t._e(),t._v(" "),"2"==e.row.type?a("a",{staticStyle:{"text-decoration":"underline",color:"#219"},attrs:{href:"#flyplan2/"+e.row.number}},[t._v(t._s(e.row.number))]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"type",label:"空域类别"},scopedSlots:t._u([{key:"default",fn:function(e){return["0"==e.row.type?a("div",[t._v("管制空域")]):t._e(),t._v(" "),"1"==e.row.type?a("div",[t._v("Ⅰ类报告空域")]):t._e(),t._v(" "),"2"==e.row.type?a("div",[t._v("Ⅱ类报告空域")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"airInfo",label:"飞行区域"}}),t._v(" "),a("el-table-column",{attrs:{prop:"time",label:"飞行时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.time.date))]),t._v(" "),a("div",[t._v(t._s(e.row.time.hour))])]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"100",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.status?a("div",{staticStyle:{color:"black"}},[t._v("审核中")]):t._e(),t._v(" "),1==e.row.status?a("div",{staticStyle:{color:"black"}},[t._v("未开始")]):t._e(),t._v(" "),2==e.row.status?a("div",{staticStyle:{color:"red"}},[t._v("未通过审核")]):t._e(),t._v(" "),3==e.row.status?a("div",{staticStyle:{color:"#3399ff"}},[t._v("执行中")]):t._e(),t._v(" "),4==e.row.status?a("div",{staticStyle:{color:"#3399ff"}},[t._v("已完成")]):t._e(),t._v(" "),5==e.row.status?a("div",{staticStyle:{color:"red"}},[t._v("超时")]):t._e(),t._v(" "),6==e.row.status?a("div",{staticStyle:{color:"red"}},[t._v("已撤销")]):t._e(),t._v(" "),7==e.row.status?a("div",{staticStyle:{color:"red"}},[t._v("已关闭")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"100",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.status?a("i",{staticClass:"fa-play fa action",attrs:{title:"开始"},on:{click:function(a){t.start(e.row.number)}}}):t._e(),t._v(" "),1==e.row.status?a("i",{staticClass:"fa-undo fa action",attrs:{title:"撤消申请"},on:{click:function(a){t.deletePlan(e.row.number)}}}):t._e(),t._v(" "),3==e.row.status?a("i",{staticClass:"fa-stop fa action",attrs:{title:"结束"},on:{click:function(a){t.finish(e.row.number)}}}):t._e(),t._v(" "),0==e.row.status?a("i",{staticClass:"fa-undo fa action",attrs:{title:"撤消申请"},on:{click:function(a){t.deletePlan(e.row.number)}}}):t._e(),t._v(" "),2==e.row.status||4==e.row.status||6==e.row.status||7==e.row.status?a("i",{staticClass:"fa fa-pencil-square-o action",attrs:{title:"以此作为模板提交"},on:{click:function(a){t.createPlan(e.row)}}}):t._e()]}}])})],1)],1)},staticRenderFns:[]}}});