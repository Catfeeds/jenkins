webpackJsonp([33,34,36,37],{239:function(e,t,a){(function(e){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=a(8),r=n(l);t.default={methods:{deleteApply:function(t){var a=this;this.$confirm("是否撤销编号"+t+"的空域申请?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var n=r.default.AIRPLAN+"/"+t;e.ajax({type:"delete",url:n,dataType:"json",success:function(e,t,a){this.search(),this.$message({type:"success",message:"撤销成功"})}.bind(a)})})},addarea:function(){var e=this.$store.getters.getSession;return 3!=e.authStatus?void this.$message.error("提示：您的帐号未通过认证，您暂时无法进行飞行报备和空域申请操作，请耐心等待"):void(window.location.href="#/airApply")},fetchAirApply:function(t,a){var n=r.default.GET_AIRPLAN+"?period="+a;"全部"!=t&&(n+="&type="+t),e.ajax({url:n,method:"get",dataType:"json",success:function(e){this.airApply=e.data.map(function(e){return e.planes=JSON.parse(e.planes),e.airInfo=JSON.parse(e.airInfo),e.landingInfo=JSON.parse(e.landingInfo),e.contactInfo=JSON.parse(e.contactInfo),e})}.bind(this)})},search:function(){this.fetchAirApply(this.filter.planType,this.filter.period)}},data:function(){return{filter:{period:30,planType:"全部"},times:[{label:"最近7天",value:7},{label:"最近两周",value:14},{label:"最近一个月",value:30},{label:"最近半年",value:183}],airApply:[]}},computed:{computedAirapplys:function e(){var e=this.airApply.map(function(e){var t={beginTime:e.beginTime.substring(0,10),endTime:e.endTime.substring(0,10)};return{number:e.number,time:t,airInfo:e.airInfo.length>0?e.airInfo[0].location:"",createTime:e.createTime,state:e.status}});return e},planTypes:function e(){var e=[];return e.push({label:"全部"}),this.$store.state.planTypes.airapply.forEach(function(t){e.push(t)}),e}},mounted:function(){this.search()}}}).call(t,a(7))},539:function(e,t,a){t=e.exports=a(2)(),t.push([e.id,".myplan_sel .el-input__icon+.el-input__inner{width:150px}","",{version:3,sources:["/./src/page/flyplan/apply.vue"],names:[],mappings:"AACA,6CAA6C,WAAW,CACvD",file:"apply.vue",sourcesContent:["\n.myplan_sel .el-input__icon+.el-input__inner{width:150px\n}"],sourceRoot:"webpack://"}])},594:function(e,t,a){var n=a(539);"string"==typeof n&&(n=[[e.id,n,""]]);a(3)(n,{});n.locals&&(e.exports=n.locals)},616:function(e,t,a){a(594);var n=a(5)(a(239),a(662),null,null);e.exports=n.exports},662:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"myplan_sel clear"},[a("div",{staticClass:"left"},[a("span",{staticStyle:{"margin-right":"10px"}},[e._v("时间:")]),e._v(" "),a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.search},model:{value:e.filter.period,callback:function(t){e.filter.period=t},expression:"filter.period"}},e._l(e.times,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("div",{staticClass:"left",staticStyle:{"margin-left":"20px"}},[a("span",{staticStyle:{"margin-right":"10px"}},[e._v("计划类型:")]),e._v(" "),a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.search},model:{value:e.filter.planType,callback:function(t){e.filter.planType=t},expression:"filter.planType"}},e._l(e.planTypes,function(e){return a("el-option",{attrs:{label:e.label,value:e.label}})}))],1),e._v(" "),a("div",{staticClass:"right"},[a("el-button",{attrs:{type:"primary"},on:{click:e.addarea}},[e._v("+ 新增")])],1)]),e._v(" "),a("el-table",{staticStyle:{width:"100%","margin-top":"15px"},attrs:{data:e.computedAirapplys}},[a("el-table-column",{attrs:{prop:"number",label:"申请任务编号"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("a",{staticStyle:{"text-decoration":"underline",color:"#219"},attrs:{href:"#/applyDetail/"+t.row.number}},[e._v(e._s(t.row.number))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"申请时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"airInfo",label:"申请空域名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"time",label:"任务时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.time.beginTime))]),e._v(" "),a("div",[e._v(e._s(t.row.time.endTime))])]}}])}),e._v(" "),a("el-table-column",{attrs:{"label-width":"50",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[3==t.row.state?a("div",{staticStyle:{color:"red"}},[e._v("已撤销申请")]):e._e(),e._v(" "),2==t.row.state?a("div",{staticStyle:{color:"red"}},[e._v("未通过审核")]):e._e(),e._v(" "),1==t.row.state?a("div",{staticStyle:{color:"#008000"}},[e._v("通过审核")]):e._e(),e._v(" "),0==t.row.state?a("div",{staticStyle:{color:"#3399ff"}},[e._v("审核中")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.state?a("div",[a("el-button",{on:{click:function(a){e.deleteApply(t.row.number)}}},[e._v("撤销申请")])],1):e._e()]}}])})],1),e._v(" "),a("div",{staticClass:"center None"},[a("el-pagination",{attrs:{layout:"prev, pager, next",total:1e3,"page-size":5}})],1)],1)},staticRenderFns:[]}}});